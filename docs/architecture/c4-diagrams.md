# Skíðblaðnir Architecture - C4 Diagrams

## Context Diagram (Level 1)

```
┌───────────────────────────────────────────────────────────────────┐
│                                                                   │
│                  [External System]                                │
│                  Source Test Systems                              │
│      (Zephyr, qTest, HP ALM, Azure DevOps, Rally, Excel)         │
│                                                                   │
└───────────────────────────┬───────────────────────────────────────┘
                            │
                            │ Extract Test Assets
                            │
                            ▼
┌───────────────────────────────────────────────────────────────────┐
│                                                                   │
│                        Skíðblaðnir                               │
│                                                                   │
└───────────────────────────┬───────────────────────────────────────┘
                            │
                            │ Load Test Assets
                            │
                            ▼
┌───────────────────────────────────────────────────────────────────┐
│                                                                   │
│                  [External System]                                │
│                  Target Test Systems                              │
│      (Zephyr, qTest, HP ALM, Azure DevOps, Rally, Excel)         │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

## Container Diagram (Level 2)

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│  ┌─────────────────┐         ┌─────────────────┐         ┌─────────────────┐   │
│  │                 │         │                 │         │                 │   │
│  │  Source System  │         │  Source System  │         │  Source System  │   │
│  │  Jira/Zephyr    │         │  HP ALM/QC      │         │  Azure DevOps   │   │
│  │                 │         │                 │         │                 │   │
│  └────────┬────────┘         └────────┬────────┘         └────────┬────────┘   │
│           │                           │                           │            │
└───────────┼───────────────────────────┼───────────────────────────┼────────────┘
            │                           │                           │
            │         Extract Test Assets via API                   │
            │                           │                           │
┌───────────┼───────────────────────────┼───────────────────────────┼────────────┐
│           │                           │                           │            │
│           ▼                           ▼                           ▼            │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                                                                         │   │
│  │                     Provider Interface Layer                            │   │
│  │                                                                         │   │
│  └───────────────────────────────────┬─────────────────────────────────────┘   │
│                                      │                                         │
│                                      │                                         │
│                                      ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                                                                         │   │
│  │                   Universal Translation Layer                           │   │
│  │                                                                         │   │
│  └───────────────────────────────────┬─────────────────────────────────────┘   │
│                                      │                                         │
│                                      │                                         │
│      ┌───────────────────────────────┼───────────────────────────────┐        │
│      │                               │                               │        │
│      ▼                               ▼                               ▼        │
│  ┌─────────────────┐        ┌─────────────────────┐        ┌─────────────────┐│
│  │                 │        │                     │        │                 ││
│  │  API Bridge     │◄───────►  Binary Content     │◄───────►  LLM Assistant  ││
│  │                 │        │  Processor          │        │                 ││
│  └─────────────────┘        └─────────────────────┘        └─────────────────┘│
│                                      │                                         │
│                                      │                                         │
│  ┌─────────────────┐                 │                   ┌─────────────────┐   │
│  │                 │                 │                   │                 │   │
│  │    PostgreSQL   │◄────────────────┼───────────────────►      MinIO     │   │
│  │    State Store  │                 │                   │   Object Store  │   │
│  │                 │                 │                   │                 │   │
│  └─────────────────┘                 │                   └─────────────────┘   │
│                                      │                                         │
│  ┌─────────────────┐                 │                                         │
│  │                 │                 │                                         │
│  │      Redis      │◄────────────────┘                                         │
│  │      Cache      │                                                           │
│  │                 │                                                           │
│  └─────────────────┘                                                           │
│                                                                                │
│  ┌────────────────────────────────────────────────────────────────────────┐    │
│  │                                                                        │    │
│  │                     Orchestration Service                              │    │
│  │                                                                        │    │
│  └────────────────────────────────────────────────────────────────────────┘    │
│                                      │                                         │
└──────────────────────────────────────┼─────────────────────────────────────────┘
                                       │
┌──────────────────────────────────────┼─────────────────────────────────────────┐
│                                      │                                         │
│                                      │     Load Test Assets via API            │
│                                      │                                         │
│  ┌─────────────────┐         ┌──────┴────────┐         ┌─────────────────┐    │
│  │                 │         │                │         │                 │    │
│  │  Target System  │         │  Target System │         │  Target System  │    │
│  │     qTest       │◄────────┤     Rally      │◄────────┤     Excel      │    │
│  │                 │         │                │         │                 │    │
│  └─────────────────┘         └────────────────┘         └─────────────────┘    │
│                                                                                │
└────────────────────────────────────────────────────────────────────────────────┘
```

## Component Diagram (Level 3) - Provider Interface Layer

```
┌──────────────────────────────────────────────────────────────────────────────────────┐
│                                Provider Interface Layer                               │
│                                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐     │
│  │ Zephyr Provider│  │  qTest Provider│  │ HP ALM Provider│  │Azure DevOps    │     │
│  └───────┬────────┘  └───────┬────────┘  └───────┬────────┘  │Provider        │     │
│          │                   │                   │           └───────┬────────┘     │
│          │                   │                   │                   │              │
│  ┌───────┴────────┐  ┌───────┴────────┐  ┌───────┴────────┐  ┌───────┴────────┐     │
│  │ Rally Provider │  │ Excel Provider │  │Provider Registry│  │Provider Factory│     │
│  └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘     │
│                                                                                      │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

## Component Diagram (Level 3) - Universal Translation Layer

```
┌──────────────────────────────────────────────────────────────────────────────────────┐
│                              Universal Translation Layer                              │
│                                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐     │
│  │ Entity Models  │  │ Mapping Engine │  │Field Translator│  │ Schema Validator│     │
│  └────────────────┘  └───────┬────────┘  └────────────────┘  └────────────────┘     │
│                              │                                                       │
│                     ┌────────┴────────┐   ┌────────────────┐  ┌────────────────┐     │
│                     │Relationship     │   │Transformation  │  │   Validation   │     │
│                     │Mapper           │   │Rules Engine    │  │   Service      │     │
│                     └────────┬────────┘   └────────────────┘  └────────────────┘     │
│                              │                                                       │
└─────────────────────────────┬┴──────────────────────────────────────────────────────┘
```

## Component Diagram (Level 3) - API Bridge

```
┌──────────────────────────────────────────────────────────────────────────────────────┐
│                                API Bridge                                             │
│                                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐     │
│  │API Specification│  │Session Manager │  │Authentication  │  │Operation       │     │
│  │Parser          │  │                │  │Handler         │  │Sequencer       │     │
│  └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘     │
│                                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐     │
│  │Request/Response│  │Rate Limiter    │  │Error Recovery  │  │Browser Auth    │     │
│  │Pipeline        │  │                │  │Engine          │  │Module          │     │
│  └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘     │
│                                                                                      │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

## Component Diagram (Level 3) - LLM Assistant

```
┌──────────────────────────────────────────────────────────────────────────────────────┐
│                               Local LLM Assistant                                     │
│                                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐     │
│  │Quantized LLM   │  │Knowledge Base  │  │API Schema      │  │Inference       │     │
│  │Engine          │  │                │  │Registry        │  │Pipeline        │     │
│  └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘     │
│                                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐     │
│  │Error Analysis  │  │Workflow        │  │Documentation   │  │RAG System      │     │
│  │Module          │  │Optimization    │  │Generator       │  │                │     │
│  └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘     │
│                                                                                      │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

## Component Diagram (Level 3) - Orchestration Service

```
┌──────────────────────────────────────────────────────────────────────────────────────┐
│                               Orchestration Service                                   │
│                                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐     │
│  │Workflow Engine │  │Migration State │  │Progress Tracker│  │ Error Handler  │     │
│  └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘     │
│                                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐     │
│  │  REST API      │  │Scheduler       │  │   Job Queue    │  │Monitoring      │     │
│  └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘     │
│                                                                                      │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

## Component Diagram (Level 3) - Binary Processor

```
┌──────────────────────────────────────────────────────────────────────────────────────┐
│                                 Binary Processor                                      │
│                                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐     │
│  │Image Processor │  │Storage Client  │  │Compression Svc │  │Integrity Check │     │
│  └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘     │
│                                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐     │
│  │Format Converter│  │Thumbnail       │  │Attachment      │  │Batch Processor │     │
│  │                │  │Generator       │  │Manager         │  │                │     │
│  └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘     │
│                                                                                      │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

## Deployment Diagram (Level 4) - Development Environment

```
┌──────────────────────────────────────────────────────────────────────────────────────┐
│                              Developer Workstation                                    │
│                                                                                      │
│  ┌────────────────────────────────────────────────────────────────────────┐          │
│  │                               Podman                                    │          │
│  │                                                                         │          │
│  │  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐               │          │
│  │  │ TypeScript    │  │ Python        │  │ Go            │               │          │
│  │  │ Dev Container │  │ Dev Container │  │ Dev Container │               │          │
│  │  └───────────────┘  └───────────────┘  └───────────────┘               │          │
│  │                                                                         │          │
│  │  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐               │          │
│  │  │ PostgreSQL    │  │ Redis         │  │ MinIO         │               │          │
│  │  │ Container     │  │ Container     │  │ Container     │               │          │
│  │  └───────────────┘  └───────────────┘  └───────────────┘               │          │
│  │                                                                         │          │
│  │  ┌───────────────┐                                                      │          │
│  │  │ Local Registry│                                                      │          │
│  │  │ Container     │                                                      │          │
│  │  └───────────────┘                                                      │          │
│  │                                                                         │          │
│  │                          Shared Volumes                                 │          │
│  └────────────────────────────────────────────────────────────────────────┘          │
│                                                                                      │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

## Deployment Diagram (Level 4) - Laptop-Friendly Development Environment

```
┌──────────────────────────────────────────────────────────────────────────────────────┐
│                         Windows 10/11 Laptop (16GB RAM)                              │
│                                                                                      │
│  ┌────────────────────────────────────────────────────────────────────────┐          │
│  │                         Docker/Podman Desktop                           │          │
│  │                                                                         │          │
│  │  ┌─────────────────────────────────┐  ┌─────────────────────────────┐   │          │
│  │  │     Memory-Constrained Services │  │    Resource Monitor         │   │          │
│  │  │                                 │  │                             │   │          │
│  │  │  ┌─────────────┐ ┌─────────────┐│  │  ┌─────────────────────┐    │   │          │
│  │  │  │ PostgreSQL  │ │ Redis       ││  │  │ Container Stats     │    │   │          │
│  │  │  │ (256MB max) │ │ (128MB max) ││  │  │ - Memory Usage      │    │   │          │
│  │  │  └─────────────┘ └─────────────┘│  │  │ - CPU Usage         │    │   │          │
│  │  │                                 │  │  │ - Health Status     │    │   │          │
│  │  │  ┌─────────────┐ ┌─────────────┐│  │  └─────────────────────┘    │   │          │
│  │  │  │ MinIO       │ │ TypeScript  ││  │                             │   │          │
│  │  │  │ (256MB max) │ │ (512MB max) ││  │  ┌─────────────────────┐    │   │          │
│  │  │  └─────────────┘ └─────────────┘│  │  │  Service Manager    │    │   │          │
│  │  │                                 │  │  │  - Start/Stop       │    │   │          │
│  │  └─────────────────────────────────┘  │  │  - Resource Limits  │    │   │          │
│  │                                       │  └─────────────────────┘    │   │          │
│  │  ┌─────────────────────────────────┐  │                             │   │          │
│  │  │      On-Demand Services         │  └─────────────────────────────┘   │          │
│  │  │  (Started only when needed)     │                                    │          │
│  │  │                                 │  ┌─────────────────────────────┐   │          │
│  │  │  ┌─────────────┐ ┌─────────────┐│  │     WSL2 Configuration      │   │          │
│  │  │  │ LLM Advisor │ │ Binary      ││  │                             │   │          │
│  │  │  │ (2GB max)   │ │ Processor   ││  │  - Memory: 8GB              │   │          │
│  │  │  │ Quantized   │ │ (256MB max) ││  │  - Processors: 3            │   │          │
│  │  │  └─────────────┘ └─────────────┘│  │  - Swap: 2GB                │   │          │
│  │  │                                 │  │                             │   │          │
│  │  └─────────────────────────────────┘  └─────────────────────────────┘   │          │
│  │                                                                         │          │
│  │                   Resource-Optimized Shared Volumes                     │          │
│  └────────────────────────────────────────────────────────────────────────┘          │
│                                                                                      │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

## Deployment Diagram (Level 4) - QA Environment

```
┌──────────────────────────────────────────────────────────────────────────────────────┐
│                                  QA Server                                            │
│                                                                                      │
│  ┌────────────────────────────────────────────────────────────────────────┐          │
│  │                               Podman                                    │          │
│  │                                                                         │          │
│  │  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐               │          │
│  │  │ API           │  │ Orchestrator  │  │ Binary        │               │          │
│  │  │ Service       │  │ Service       │  │ Processor     │               │          │
│  │  └───────────────┘  └───────────────┘  └───────────────┘               │          │
│  │                                                                         │          │
│  │  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐               │          │
│  │  │ PostgreSQL    │  │ Redis         │  │ MinIO         │               │          │
│  │  │ Container     │  │ Container     │  │ Container     │               │          │
│  │  └───────────────┘  └───────────────┘  └───────────────┘               │          │
│  │                                                                         │          │
│  │  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐               │          │
│  │  │ Mock Zephyr   │  │ Mock qTest    │  │ Mock HP ALM   │               │          │
│  │  │ API           │  │ API           │  │ API           │               │          │
│  │  └───────────────┘  └───────────────┘  └───────────────┘               │          │
│  │                                                                         │          │
│  │  ┌───────────────┐  ┌───────────────┐                                   │          │
│  │  │ LLM Assistant │  │ Monitoring    │                                   │          │
│  │  │ Container     │  │ Service       │                                   │          │
│  │  └───────────────┘  └───────────────┘                                   │          │
│  │                                                                         │          │
│  │                        Persistent Volumes                               │          │
│  └────────────────────────────────────────────────────────────────────────┘          │
│                                                                                      │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

## Deployment Diagram (Level 4) - Production Environment

```
┌──────────────────────────────────────────────────────────────────────────────────────┐
│                             Production Environment                                    │
│                                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐     │
│  │                │  │                │  │                │  │                │     │
│  │  API Service   │  │  API Service   │  │ Orchestrator   │  │ Orchestrator   │     │
│  │  Container     │  │  Container     │  │ Container      │  │ Container      │     │
│  │  (Replica 1)   │  │  (Replica 2)   │  │ (Replica 1)    │  │ (Replica 2)    │     │
│  │                │  │                │  │                │  │                │     │
│  └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘     │
│                                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐     │
│  │                │  │                │  │                │  │                │     │
│  │Binary Processor│  │Binary Processor│  │   PostgreSQL   │  │     Redis      │     │
│  │  Container     │  │  Container     │  │    Cluster     │  │    Cluster     │     │
│  │  (Replica 1)   │  │  (Replica 2)   │  │                │  │                │     │
│  │                │  │                │  │                │  │                │     │
│  └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘     │
│                                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐     │
│  │                │  │                │  │                │  │                │     │
│  │ LLM Assistant  │  │ LLM Assistant  │  │  Monitoring    │  │   Logging      │     │
│  │  Container     │  │  Container     │  │   Service      │  │   Service      │     │
│  │  (Replica 1)   │  │  (Replica 2)   │  │                │  │                │     │
│  │                │  │                │  │                │  │                │     │
│  └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘     │
│                                                                                      │
│  ┌────────────────────────────────────┐  ┌────────────────────────────────────┐     │
│  │                                    │  │                                    │     │
│  │       MinIO Storage Cluster        │  │       Persistent Volumes           │     │
│  │                                    │  │                                    │     │
│  └────────────────────────────────────┘  └────────────────────────────────────┘     │
│                                                                                      │
└──────────────────────────────────────────────────────────────────────────────────────┘
```