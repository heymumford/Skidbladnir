<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="stylesheet" href="res/bootstrap.min.css" type="text/css"/>
    <link rel="stylesheet" href="res/karate-report.css" type="text/css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <script type="text/javascript" src="res/jquery.min.js"></script>
    <script type="text/javascript" src="res/jquery.tablesorter.min.js"></script>
    <script type="text/javascript" src="res/jquery-ui.min.js"></script>
    <script type="text/javascript" src="res/bootstrap.min.js"></script>
    <script type="text/javascript" src="res/karate-report.js"></script>
    <script type="text/javascript" src="res/Resemble.js"></script>
    <script>
!function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
posthog.init('phc_M6fKk3dSX9HjglkqPSybauGas45NINb7EgsPGU8N9g1',{
  api_host:'https://app.posthog.com',
  persistence:'localStorage',
  autocapture:false,
  capture_pageview:false,
  api_transport:'sendBeacon',
  loaded: function(posthog) { 
    posthog.capture("report_feature",{distinct_id:"0faf2e08-6c35-4735-9368-bb05cbe4cf6c",karate_version:"1.4.1",karate_meta:null});
  }
});
</script>

    <title>org.skidbladnir.contracts.provider-error-handling</title>
  </head>
  <body>
    <div id="root-container">
      <div id="leftnav">
        
        <div>
  <div class="nav-logo">
    <a href="https://karatelabs.io">
      <img src="karate-labs-logo-ring.svg" alt="Karate Labs"/>
    </a>
    <div class="nav-count">
      <div id="nav-pass" class="bg-success">0</div>
      <div id="nav-fail" class="bg-danger">30</div>
    </div>
  </div>
  <div id="nav-env">
    <div></div>
  </div>
  <div id="nav-type">
    <div>Scenarios</div>
  </div>
  <div id="nav-date">
    <div>2025-04-10 12:11:14 PM</div>
  </div>
</div>

        <div class="nav-container">
          <div class="nav-item failed">
            <a href="#[1.1:241]"><span>[1.1:241]</span> <span>Zephyr provider error handling - Not Found</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[1.2:242]"><span>[1.2:242]</span> <span>Zephyr provider error handling - Validation</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[1.3:243]"><span>[1.3:243]</span> <span>Zephyr provider error handling - Authentication</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[1.4:244]"><span>[1.4:244]</span> <span>Zephyr provider error handling - Authorization</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[1.5:245]"><span>[1.5:245]</span> <span>Zephyr provider error handling - Server Error</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[1.6:246]"><span>[1.6:246]</span> <span>Zephyr provider error handling - Rate Limit</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[1.7:247]"><span>[1.7:247]</span> <span>Zephyr provider error handling - Timeout</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[1.8:248]"><span>[1.8:248]</span> <span>Zephyr provider error handling - Conflict</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[1.9:249]"><span>[1.9:249]</span> <span>Zephyr provider error handling - Unprocessable Entity</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[1.10:250]"><span>[1.10:250]</span> <span>Zephyr provider error handling - Batch Operation Errors</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[2.1:268]"><span>[2.1:268]</span> <span>qTest provider error handling - Not Found</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[2.2:269]"><span>[2.2:269]</span> <span>qTest provider error handling - Validation</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[2.3:270]"><span>[2.3:270]</span> <span>qTest provider error handling - Authentication</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[2.4:271]"><span>[2.4:271]</span> <span>qTest provider error handling - Authorization</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[2.5:272]"><span>[2.5:272]</span> <span>qTest provider error handling - Server Error</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[2.6:273]"><span>[2.6:273]</span> <span>qTest provider error handling - Rate Limit</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[2.7:274]"><span>[2.7:274]</span> <span>qTest provider error handling - Timeout</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[2.8:275]"><span>[2.8:275]</span> <span>qTest provider error handling - Conflict</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[2.9:276]"><span>[2.9:276]</span> <span>qTest provider error handling - Unprocessable Entity</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[2.10:277]"><span>[2.10:277]</span> <span>qTest provider error handling - Batch Operation Errors</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[3:280]"><span>[3:280]</span> <span>Sensitive information is redacted in error responses</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[4:334]"><span>[4:334]</span> <span>Error responses include operation context information</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[5:350]"><span>[5:350]</span> <span>Retry mechanism handles transient errors</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[6:365]"><span>[6:365]</span> <span>Rate limiting is handled consistently across providers</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[7:379]"><span>[7:379]</span> <span>Circuit breaker prevents cascading failures</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[8:408]"><span>[8:408]</span> <span>Error responses include stack traces in development mode only</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[9:432]"><span>[9:432]</span> <span>Error correlation IDs are maintained across calls</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[10:449]"><span>[10:449]</span> <span>Batch operations properly handle partial success</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[11:484]"><span>[11:484]</span> <span>Provider-specific error codes are normalized to standard error codes</span></a>
          </div>
          <div class="nav-item failed">
            <a href="#[12:513]"><span>[12:513]</span> <span>Fallback mechanism is triggered when primary operation fails</span></a>
          </div>
        </div>
      </div>
      <div id="content">
        <div class="page-heading alert alert-primary">
          <a href="karate-summary.html">Summary</a><span class="feature-label">|</span>
          <a href="karate-tags.html">Tags</a><span class="feature-label">|</span>
          <span class="feature-label">Feature:</span>
          <span class="feature-path">org/skidbladnir/contracts/provider-error-handling.feature</span><span class="feature-label">|</span>
          <span class="feature-name">Provider Error Handling Patterns</span>
          <span class="feature-description">This feature validates the consistent error handling patterns across different providers.
  It tests that error messages, formatting, and recovery follow the same patterns regardless of the provider.</span>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1.1:241]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1.1:241]</span>
                <span class="scenario-name">Zephyr provider error handling - Not Found</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>60</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1.1:241]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1.1:241]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="1.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">24</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="1.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.1:241]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">4</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.227">
      <div class="step-ref passed">227</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateNotFoundError &#39;zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">8</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.229">
      <div class="step-ref passed">229</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.230">
      <div class="step-ref passed">230</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.231">
      <div class="step-ref passed">231</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.232">
      <div class="step-ref failed">232</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.233">
      <div class="step-ref skipped">233</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 404</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.234">
      <div class="step-ref skipped">234</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.235">
      <div class="step-ref skipped">235</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service == &#39;Zephyr Scale&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.236">
      <div class="step-ref skipped">236</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;not found&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.237">
      <div class="step-ref skipped">237</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;NOT_FOUND&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1.2:242]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1.2:242]</span>
                <span class="scenario-name">Zephyr provider error handling - Validation</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>8</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1.2:242]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1.2:242]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="2.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="2.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.2:242]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.227">
      <div class="step-ref passed">227</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateValidationError &#39;zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.229">
      <div class="step-ref passed">229</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.230">
      <div class="step-ref passed">230</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.231">
      <div class="step-ref passed">231</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.232">
      <div class="step-ref failed">232</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.233">
      <div class="step-ref skipped">233</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 400</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.234">
      <div class="step-ref skipped">234</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.235">
      <div class="step-ref skipped">235</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service == &#39;Zephyr Scale&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.236">
      <div class="step-ref skipped">236</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;validation&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.237">
      <div class="step-ref skipped">237</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.details.fields != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1.3:243]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1.3:243]</span>
                <span class="scenario-name">Zephyr provider error handling - Authentication</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>7</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1.3:243]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1.3:243]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="3.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="3.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.3:243]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.227">
      <div class="step-ref passed">227</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateAuthError &#39;zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.229">
      <div class="step-ref passed">229</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.230">
      <div class="step-ref passed">230</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.231">
      <div class="step-ref passed">231</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.232">
      <div class="step-ref failed">232</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.233">
      <div class="step-ref skipped">233</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 401</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.234">
      <div class="step-ref skipped">234</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.235">
      <div class="step-ref skipped">235</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service == &#39;Zephyr Scale&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.236">
      <div class="step-ref skipped">236</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;Authentication&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.237">
      <div class="step-ref skipped">237</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;UNAUTHORIZED&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1.4:244]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1.4:244]</span>
                <span class="scenario-name">Zephyr provider error handling - Authorization</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>6</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1.4:244]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1.4:244]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="4.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="4.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.4:244]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.227">
      <div class="step-ref passed">227</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateAuthorizationError &#39;zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.229">
      <div class="step-ref passed">229</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.230">
      <div class="step-ref passed">230</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.231">
      <div class="step-ref passed">231</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.232">
      <div class="step-ref failed">232</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.233">
      <div class="step-ref skipped">233</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 403</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.234">
      <div class="step-ref skipped">234</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.235">
      <div class="step-ref skipped">235</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service == &#39;Zephyr Scale&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.236">
      <div class="step-ref skipped">236</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;Permission&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.237">
      <div class="step-ref skipped">237</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;FORBIDDEN&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1.5:245]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1.5:245]</span>
                <span class="scenario-name">Zephyr provider error handling - Server Error</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>6</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1.5:245]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1.5:245]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="5.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="5.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.5:245]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.227">
      <div class="step-ref passed">227</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateServerError &#39;zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.229">
      <div class="step-ref passed">229</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.230">
      <div class="step-ref passed">230</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.231">
      <div class="step-ref passed">231</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.232">
      <div class="step-ref failed">232</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.233">
      <div class="step-ref skipped">233</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 500</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.234">
      <div class="step-ref skipped">234</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.235">
      <div class="step-ref skipped">235</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service == &#39;Zephyr Scale&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.236">
      <div class="step-ref skipped">236</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;server error&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.237">
      <div class="step-ref skipped">237</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;SERVER_ERROR&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1.6:246]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1.6:246]</span>
                <span class="scenario-name">Zephyr provider error handling - Rate Limit</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>6</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1.6:246]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1.6:246]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="6.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="6.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.6:246]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.227">
      <div class="step-ref passed">227</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateRateLimitError &#39;zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.229">
      <div class="step-ref passed">229</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.230">
      <div class="step-ref passed">230</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.231">
      <div class="step-ref passed">231</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.232">
      <div class="step-ref failed">232</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.233">
      <div class="step-ref skipped">233</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 429</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.234">
      <div class="step-ref skipped">234</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.235">
      <div class="step-ref skipped">235</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service == &#39;Zephyr Scale&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.236">
      <div class="step-ref skipped">236</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;rate limit&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.237">
      <div class="step-ref skipped">237</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.details.retryAfter != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1.7:247]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1.7:247]</span>
                <span class="scenario-name">Zephyr provider error handling - Timeout</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>5</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1.7:247]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1.7:247]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="7.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="7.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.7:247]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.227">
      <div class="step-ref passed">227</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateTimeoutError &#39;zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.229">
      <div class="step-ref passed">229</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.230">
      <div class="step-ref passed">230</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.231">
      <div class="step-ref passed">231</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.232">
      <div class="step-ref failed">232</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.233">
      <div class="step-ref skipped">233</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 504</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.234">
      <div class="step-ref skipped">234</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.235">
      <div class="step-ref skipped">235</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service == &#39;Zephyr Scale&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.236">
      <div class="step-ref skipped">236</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;timeout&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.237">
      <div class="step-ref skipped">237</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;GATEWAY_TIMEOUT&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1.8:248]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1.8:248]</span>
                <span class="scenario-name">Zephyr provider error handling - Conflict</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>5</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1.8:248]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1.8:248]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="8.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="8.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.8:248]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.227">
      <div class="step-ref passed">227</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateConflictError &#39;zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.229">
      <div class="step-ref passed">229</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.230">
      <div class="step-ref passed">230</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.231">
      <div class="step-ref passed">231</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.232">
      <div class="step-ref failed">232</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.233">
      <div class="step-ref skipped">233</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 409</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.234">
      <div class="step-ref skipped">234</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.235">
      <div class="step-ref skipped">235</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service == &#39;Zephyr Scale&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.236">
      <div class="step-ref skipped">236</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;conflict&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.237">
      <div class="step-ref skipped">237</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;CONFLICT&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1.9:249]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1.9:249]</span>
                <span class="scenario-name">Zephyr provider error handling - Unprocessable Entity</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>4</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1.9:249]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1.9:249]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="9.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="9.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.9:249]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.227">
      <div class="step-ref passed">227</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateUnprocessableEntityError &#39;zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.229">
      <div class="step-ref passed">229</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.230">
      <div class="step-ref passed">230</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.231">
      <div class="step-ref passed">231</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.232">
      <div class="step-ref failed">232</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.233">
      <div class="step-ref skipped">233</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 422</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.234">
      <div class="step-ref skipped">234</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.235">
      <div class="step-ref skipped">235</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service == &#39;Zephyr Scale&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.236">
      <div class="step-ref skipped">236</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;validation&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.237">
      <div class="step-ref skipped">237</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;UNPROCESSABLE_ENTITY&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1.10:250]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1.10:250]</span>
                <span class="scenario-name">Zephyr provider error handling - Batch Operation Errors</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>9</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1.10:250]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1.10:250]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="10.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="10.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[1.10:250]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.227">
      <div class="step-ref passed">227</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateBatchOperationError &#39;zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">6</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.229">
      <div class="step-ref passed">229</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.230">
      <div class="step-ref passed">230</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.231">
      <div class="step-ref passed">231</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.232">
      <div class="step-ref failed">232</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.233">
      <div class="step-ref skipped">233</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 400</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.234">
      <div class="step-ref skipped">234</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.235">
      <div class="step-ref skipped">235</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service == &#39;Zephyr Scale&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.236">
      <div class="step-ref skipped">236</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;batch&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.237">
      <div class="step-ref skipped">237</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.details.errors != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2.1:268]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2.1:268]</span>
                <span class="scenario-name">qTest provider error handling - Not Found</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>4</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2.1:268]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2.1:268]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="1.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="1.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.1:268]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="1.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.254">
      <div class="step-ref passed">254</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateNotFoundError &#39;qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.256">
      <div class="step-ref passed">256</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.257">
      <div class="step-ref passed">257</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.258">
      <div class="step-ref passed">258</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.259">
      <div class="step-ref failed">259</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.260">
      <div class="step-ref skipped">260</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 404</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.261">
      <div class="step-ref skipped">261</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.262">
      <div class="step-ref skipped">262</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service contains &#39;qTest&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.263">
      <div class="step-ref skipped">263</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;not found&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="1.264">
      <div class="step-ref skipped">264</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;NOT_FOUND&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2.2:269]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2.2:269]</span>
                <span class="scenario-name">qTest provider error handling - Validation</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>3</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2.2:269]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2.2:269]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="2.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="2.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.2:269]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="2.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.254">
      <div class="step-ref passed">254</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateValidationError &#39;qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.256">
      <div class="step-ref passed">256</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.257">
      <div class="step-ref passed">257</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.258">
      <div class="step-ref passed">258</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.259">
      <div class="step-ref failed">259</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.260">
      <div class="step-ref skipped">260</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 400</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.261">
      <div class="step-ref skipped">261</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.262">
      <div class="step-ref skipped">262</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service contains &#39;qTest&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.263">
      <div class="step-ref skipped">263</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;validation&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="2.264">
      <div class="step-ref skipped">264</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.details.fields != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2.3:270]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2.3:270]</span>
                <span class="scenario-name">qTest provider error handling - Authentication</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>3</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2.3:270]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2.3:270]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="3.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="3.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.3:270]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="3.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.254">
      <div class="step-ref passed">254</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateAuthError &#39;qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.256">
      <div class="step-ref passed">256</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.257">
      <div class="step-ref passed">257</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.258">
      <div class="step-ref passed">258</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.259">
      <div class="step-ref failed">259</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.260">
      <div class="step-ref skipped">260</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 401</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.261">
      <div class="step-ref skipped">261</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.262">
      <div class="step-ref skipped">262</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service contains &#39;qTest&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.263">
      <div class="step-ref skipped">263</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;Authentication&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="3.264">
      <div class="step-ref skipped">264</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;UNAUTHORIZED&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2.4:271]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2.4:271]</span>
                <span class="scenario-name">qTest provider error handling - Authorization</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>4</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2.4:271]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2.4:271]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="4.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="4.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.4:271]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="4.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.254">
      <div class="step-ref passed">254</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateAuthorizationError &#39;qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.256">
      <div class="step-ref passed">256</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.257">
      <div class="step-ref passed">257</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.258">
      <div class="step-ref passed">258</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.259">
      <div class="step-ref failed">259</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.260">
      <div class="step-ref skipped">260</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 403</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.261">
      <div class="step-ref skipped">261</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.262">
      <div class="step-ref skipped">262</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service contains &#39;qTest&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.263">
      <div class="step-ref skipped">263</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;Permission&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="4.264">
      <div class="step-ref skipped">264</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;FORBIDDEN&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2.5:272]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2.5:272]</span>
                <span class="scenario-name">qTest provider error handling - Server Error</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>3</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2.5:272]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2.5:272]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="5.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="5.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.5:272]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="5.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.254">
      <div class="step-ref passed">254</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateServerError &#39;qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.256">
      <div class="step-ref passed">256</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.257">
      <div class="step-ref passed">257</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.258">
      <div class="step-ref passed">258</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.259">
      <div class="step-ref failed">259</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.260">
      <div class="step-ref skipped">260</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 500</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.261">
      <div class="step-ref skipped">261</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.262">
      <div class="step-ref skipped">262</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service contains &#39;qTest&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.263">
      <div class="step-ref skipped">263</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;server error&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="5.264">
      <div class="step-ref skipped">264</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;SERVER_ERROR&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2.6:273]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2.6:273]</span>
                <span class="scenario-name">qTest provider error handling - Rate Limit</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>3</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2.6:273]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2.6:273]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="6.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="6.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.6:273]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="6.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.254">
      <div class="step-ref passed">254</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateRateLimitError &#39;qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.256">
      <div class="step-ref passed">256</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.257">
      <div class="step-ref passed">257</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.258">
      <div class="step-ref passed">258</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.259">
      <div class="step-ref failed">259</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.260">
      <div class="step-ref skipped">260</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 429</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.261">
      <div class="step-ref skipped">261</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.262">
      <div class="step-ref skipped">262</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service contains &#39;qTest&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.263">
      <div class="step-ref skipped">263</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;rate limit&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="6.264">
      <div class="step-ref skipped">264</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.details.retryAfter != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2.7:274]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2.7:274]</span>
                <span class="scenario-name">qTest provider error handling - Timeout</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>4</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2.7:274]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2.7:274]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="7.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="7.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.7:274]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="7.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.254">
      <div class="step-ref passed">254</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateTimeoutError &#39;qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.256">
      <div class="step-ref passed">256</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.257">
      <div class="step-ref passed">257</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.258">
      <div class="step-ref passed">258</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.259">
      <div class="step-ref failed">259</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.260">
      <div class="step-ref skipped">260</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 504</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.261">
      <div class="step-ref skipped">261</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.262">
      <div class="step-ref skipped">262</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service contains &#39;qTest&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.263">
      <div class="step-ref skipped">263</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;timeout&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="7.264">
      <div class="step-ref skipped">264</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;GATEWAY_TIMEOUT&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2.8:275]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2.8:275]</span>
                <span class="scenario-name">qTest provider error handling - Conflict</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>3</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2.8:275]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2.8:275]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="8.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="8.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.8:275]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="8.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.254">
      <div class="step-ref passed">254</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateConflictError &#39;qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.256">
      <div class="step-ref passed">256</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.257">
      <div class="step-ref passed">257</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.258">
      <div class="step-ref passed">258</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.259">
      <div class="step-ref failed">259</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.260">
      <div class="step-ref skipped">260</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 409</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.261">
      <div class="step-ref skipped">261</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.262">
      <div class="step-ref skipped">262</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service contains &#39;qTest&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.263">
      <div class="step-ref skipped">263</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;conflict&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="8.264">
      <div class="step-ref skipped">264</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;CONFLICT&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2.9:276]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2.9:276]</span>
                <span class="scenario-name">qTest provider error handling - Unprocessable Entity</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>3</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2.9:276]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2.9:276]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="9.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="9.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.9:276]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="9.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.254">
      <div class="step-ref passed">254</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateUnprocessableEntityError &#39;qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.256">
      <div class="step-ref passed">256</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.257">
      <div class="step-ref passed">257</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.258">
      <div class="step-ref passed">258</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.259">
      <div class="step-ref failed">259</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.260">
      <div class="step-ref skipped">260</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 422</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.261">
      <div class="step-ref skipped">261</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.262">
      <div class="step-ref skipped">262</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service contains &#39;qTest&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.263">
      <div class="step-ref skipped">263</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;validation&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="9.264">
      <div class="step-ref skipped">264</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.code == &#39;UNPROCESSABLE_ENTITY&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2.10:277]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2.10:277]</span>
                <span class="scenario-name">qTest provider error handling - Batch Operation Errors</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>3</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2.10:277]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2.10:277]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="10.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="10.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[2.10:277]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="10.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.254">
      <div class="step-ref passed">254</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def errorConfig = call simulateBatchOperationError &#39;qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.256">
      <div class="step-ref passed">256</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url errorConfig.url</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.257">
      <div class="step-ref passed">257</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request errorConfig.body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.258">
      <div class="step-ref passed">258</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers errorConfig.headers || {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.259">
      <div class="step-ref failed">259</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method &lt;errorConfig.method&gt;</span>
      </div>
    </div>
    <div class="time-cell failed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.260">
      <div class="step-ref skipped">260</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 400</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.261">
      <div class="step-ref skipped">261</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.262">
      <div class="step-ref skipped">262</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.service contains &#39;qTest&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.263">
      <div class="step-ref skipped">263</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;batch&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="10.264">
      <div class="step-ref skipped">264</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>eval And match response.details.errors != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[3:280]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[3:280]</span>
                <span class="scenario-name">Sensitive information is redacted in error responses</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>261</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[3:280]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[3:280]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[3:280]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Test with Zephyr provider - API Token</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.282">
      <div class="step-ref passed">282</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/auth&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.283">
      <div class="step-ref passed">283</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request { apiToken: &#39;secret-token-value&#39;, username: &#39;testuser&#39; }</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.284">
      <div class="step-ref failed">284</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method POST</span>
      </div>
    </div>
    <div class="time-cell failed">257</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.285">
      <div class="step-ref skipped">285</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 401</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.286">
      <div class="step-ref skipped">286</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.287">
      <div class="step-ref skipped">287</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error !contains &#39;secret-token-value&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.288">
      <div class="step-ref skipped">288</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.params !contains &#39;secret-token-value&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.289">
      <div class="step-ref skipped">289</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.params contains &#39;***REDACTED***&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.290">
      <div class="step-ref skipped">290</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.params.username == &#39;testuser&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Test with Zephyr provider - OAuth token in header</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.293">
      <div class="step-ref skipped">293</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.294">
      <div class="step-ref skipped">294</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>header Authorization = &#39;Bearer oauth-token-123456&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.295">
      <div class="step-ref skipped">295</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.296">
      <div class="step-ref skipped">296</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 401</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.297">
      <div class="step-ref skipped">297</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.298">
      <div class="step-ref skipped">298</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error !contains &#39;oauth-token-123456&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.299">
      <div class="step-ref skipped">299</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.headers !contains &#39;oauth-token-123456&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.300">
      <div class="step-ref skipped">300</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.headers.Authorization contains &#39;***REDACTED***&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Test with qTest provider - Username/Password</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.303">
      <div class="step-ref skipped">303</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + qtestBasePath + &#39;/auth&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.304">
      <div class="step-ref skipped">304</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>request { username: &#39;testuser&#39;, password: &#39;secret-password&#39; }</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.305">
      <div class="step-ref skipped">305</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method POST</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.306">
      <div class="step-ref skipped">306</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 401</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.307">
      <div class="step-ref skipped">307</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.308">
      <div class="step-ref skipped">308</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error !contains &#39;secret-password&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.309">
      <div class="step-ref skipped">309</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.params !contains &#39;secret-password&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.310">
      <div class="step-ref skipped">310</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.params contains &#39;***REDACTED***&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.311">
      <div class="step-ref skipped">311</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.params.username == &#39;testuser&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Test with qTest provider - API key in query parameter</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.314">
      <div class="step-ref skipped">314</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + qtestBasePath + &#39;/projects&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.315">
      <div class="step-ref skipped">315</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>param apiKey = &#39;sensitive-api-key-12345&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.316">
      <div class="step-ref skipped">316</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.317">
      <div class="step-ref skipped">317</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 401</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.318">
      <div class="step-ref skipped">318</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.319">
      <div class="step-ref skipped">319</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error !contains &#39;sensitive-api-key-12345&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.320">
      <div class="step-ref skipped">320</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.params !contains &#39;sensitive-api-key-12345&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.321">
      <div class="step-ref skipped">321</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.params.apiKey contains &#39;***REDACTED***&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Test redaction of pattern-matching data like credit cards and passwords</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.324">
      <div class="step-ref skipped">324</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.325">
      <div class="step-ref skipped">325</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>request { name: &#39;Test Case&#39;, description: &#39;Contains sensitive data: 4111-1111-1111-1111 and password123&#39; }</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.326">
      <div class="step-ref skipped">326</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method POST</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.327">
      <div class="step-ref skipped">327</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 400</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.328">
      <div class="step-ref skipped">328</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.329">
      <div class="step-ref skipped">329</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error !contains &#39;4111-1111-1111-1111&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.330">
      <div class="step-ref skipped">330</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error !contains &#39;password123&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.331">
      <div class="step-ref skipped">331</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.params.description contains &#39;***REDACTED***&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[4:334]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[4:334]</span>
                <span class="scenario-name">Error responses include operation context information</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>17</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[4:334]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[4:334]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[4:334]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.335">
      <div class="step-ref passed">335</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.336">
      <div class="step-ref failed">336</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell failed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.337">
      <div class="step-ref skipped">337</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 404</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.338">
      <div class="step-ref skipped">338</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.339">
      <div class="step-ref skipped">339</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.operation == &#39;getTestCase&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.340">
      <div class="step-ref skipped">340</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.params.testCaseId == &#39;non-existent-id&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.342">
      <div class="step-ref skipped">342</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.343">
      <div class="step-ref skipped">343</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.344">
      <div class="step-ref skipped">344</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 404</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.345">
      <div class="step-ref skipped">345</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.346">
      <div class="step-ref skipped">346</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.operation == &#39;getTestCase&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.347">
      <div class="step-ref skipped">347</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.params.testCaseId == &#39;non-existent-id&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[5:350]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[5:350]</span>
                <span class="scenario-name">Retry mechanism handles transient errors</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>4</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[5:350]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[5:350]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[5:350]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># The client will retry automatically for certain error types</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.352">
      <div class="step-ref passed">352</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/retry-test&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.353">
      <div class="step-ref failed">353</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell failed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.354">
      <div class="step-ref skipped">354</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.355">
      <div class="step-ref skipped">355</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.retriedCount == 2</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.356">
      <div class="step-ref skipped">356</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.requestId != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.358">
      <div class="step-ref skipped">358</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + qtestBasePath + &#39;/retry-test&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.359">
      <div class="step-ref skipped">359</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.360">
      <div class="step-ref skipped">360</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.361">
      <div class="step-ref skipped">361</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.retriedCount == 2</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.362">
      <div class="step-ref skipped">362</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.requestId != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[6:365]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[6:365]</span>
                <span class="scenario-name">Rate limiting is handled consistently across providers</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>3</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[6:365]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[6:365]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[6:365]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.366">
      <div class="step-ref passed">366</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/rate-limit-test&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.367">
      <div class="step-ref failed">367</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell failed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.368">
      <div class="step-ref skipped">368</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 429</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.369">
      <div class="step-ref skipped">369</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.370">
      <div class="step-ref skipped">370</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.retryAfter != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.372">
      <div class="step-ref skipped">372</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + qtestBasePath + &#39;/rate-limit-test&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.373">
      <div class="step-ref skipped">373</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.374">
      <div class="step-ref skipped">374</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 429</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.375">
      <div class="step-ref skipped">375</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.376">
      <div class="step-ref skipped">376</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.retryAfter != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[7:379]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[7:379]</span>
                <span class="scenario-name">Circuit breaker prevents cascading failures</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>5</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[7:379]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[7:379]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[7:379]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># First call to trigger circuit breaker state change</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.381">
      <div class="step-ref passed">381</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/circuit-breaker-test&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.382">
      <div class="step-ref failed">382</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell failed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.383">
      <div class="step-ref skipped">383</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 500</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.384">
      <div class="step-ref skipped">384</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;server error&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Second call should short-circuit and return immediately</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.387">
      <div class="step-ref skipped">387</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/circuit-breaker-test&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.388">
      <div class="step-ref skipped">388</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.389">
      <div class="step-ref skipped">389</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 503</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.390">
      <div class="step-ref skipped">390</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;circuit breaker&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.391">
      <div class="step-ref skipped">391</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.code == &#39;CIRCUIT_OPEN&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.392">
      <div class="step-ref skipped">392</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.reopenAfter != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Verify qTest circuit breaker behaves the same way</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.395">
      <div class="step-ref skipped">395</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + qtestBasePath + &#39;/circuit-breaker-test&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.396">
      <div class="step-ref skipped">396</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.397">
      <div class="step-ref skipped">397</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 500</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.398">
      <div class="step-ref skipped">398</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;server error&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.400">
      <div class="step-ref skipped">400</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + qtestBasePath + &#39;/circuit-breaker-test&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.401">
      <div class="step-ref skipped">401</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.402">
      <div class="step-ref skipped">402</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 503</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.403">
      <div class="step-ref skipped">403</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;circuit breaker&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.404">
      <div class="step-ref skipped">404</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.code == &#39;CIRCUIT_OPEN&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.405">
      <div class="step-ref skipped">405</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.reopenAfter != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[8:408]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[8:408]</span>
                <span class="scenario-name">Error responses include stack traces in development mode only</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>20</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[8:408]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[8:408]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[8:408]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Set environment to development</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.410">
      <div class="step-ref passed">410</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def originalEnv = karate.get(&#39;env.NODE_ENV&#39;) || &#39;development&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">13</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.411">
      <div class="step-ref passed">411</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>karate.set(&#39;env.NODE_ENV&#39;, &#39;development&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.413">
      <div class="step-ref passed">413</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.414">
      <div class="step-ref failed">414</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell failed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.415">
      <div class="step-ref skipped">415</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 500</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.416">
      <div class="step-ref skipped">416</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;server error&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.417">
      <div class="step-ref skipped">417</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.stack != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Set environment to production</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.420">
      <div class="step-ref skipped">420</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>karate.set(&#39;env.NODE_ENV&#39;, &#39;production&#39;)</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.422">
      <div class="step-ref skipped">422</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.423">
      <div class="step-ref skipped">423</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.424">
      <div class="step-ref skipped">424</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 500</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.425">
      <div class="step-ref skipped">425</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.error contains &#39;server error&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.426">
      <div class="step-ref skipped">426</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.details.stack == null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Reset environment</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.429">
      <div class="step-ref skipped">429</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>karate.set(&#39;env.NODE_ENV&#39;, originalEnv)</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[9:432]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[9:432]</span>
                <span class="scenario-name">Error correlation IDs are maintained across calls</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>5</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[9:432]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[9:432]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[9:432]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># First call generates an error with correlation ID</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.434">
      <div class="step-ref passed">434</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/correlated-error&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.435">
      <div class="step-ref failed">435</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell failed">3</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.436">
      <div class="step-ref skipped">436</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 500</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.437">
      <div class="step-ref skipped">437</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.requestId != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.439">
      <div class="step-ref skipped">439</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>def correlationId = response.requestId</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Second call with correlation header should preserve the ID</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.442">
      <div class="step-ref skipped">442</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/correlated-error&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.443">
      <div class="step-ref skipped">443</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>header X-Correlation-ID = correlationId</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.444">
      <div class="step-ref skipped">444</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.445">
      <div class="step-ref skipped">445</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 500</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.446">
      <div class="step-ref skipped">446</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.requestId == correlationId</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[10:449]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[10:449]</span>
                <span class="scenario-name">Batch operations properly handle partial success</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>5</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[10:449]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[10:449]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[10:449]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.450">
      <div class="step-ref passed">450</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch-partial&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.451">
      <div class="step-ref passed">451</div>
      
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.451">[
  { &quot;name&quot;: &quot;Valid Test Case 1&quot; },
  { },
  { &quot;name&quot;: &quot;Valid Test Case 2&quot; }
]</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.459">
      <div class="step-ref failed">459</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method POST</span>
      </div>
    </div>
    <div class="time-cell failed">3</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.460">
      <div class="step-ref skipped">460</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 207</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.461">
      <div class="step-ref skipped">461</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.results[0].status == 201</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.462">
      <div class="step-ref skipped">462</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.results[1].status == 400</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.463">
      <div class="step-ref skipped">463</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.results[1].error != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.464">
      <div class="step-ref skipped">464</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.results[2].status == 201</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Verify qTest behaves the same way</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.467">
      <div class="step-ref skipped">467</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + qtestBasePath + &#39;/test-cases/batch-partial&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.468">
      <div class="step-ref skipped">468</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>request</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.468">[
  { &quot;name&quot;: &quot;Valid Test Case 1&quot; },
  { },
  { &quot;name&quot;: &quot;Valid Test Case 2&quot; }
]</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.476">
      <div class="step-ref skipped">476</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method POST</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.477">
      <div class="step-ref skipped">477</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 207</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.478">
      <div class="step-ref skipped">478</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.results[0].status == 201</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.479">
      <div class="step-ref skipped">479</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.results[1].status == 400</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.480">
      <div class="step-ref skipped">480</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.results[1].error != null</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.481">
      <div class="step-ref skipped">481</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.results[2].status == 201</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[11:484]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[11:484]</span>
                <span class="scenario-name">Provider-specific error codes are normalized to standard error codes</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>3</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[11:484]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[11:484]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[11:484]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Zephyr uses specific error codes that should be normalized</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.486">
      <div class="step-ref passed">486</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/provider-specific-error&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.487">
      <div class="step-ref failed">487</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell failed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.488">
      <div class="step-ref skipped">488</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 400</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.489">
      <div class="step-ref skipped">489</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.490">
      <div class="step-ref skipped">490</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.code == &#39;VALIDATION_ERROR&#39;  # Normalized code</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># qTest uses different error codes for the same concept</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.493">
      <div class="step-ref skipped">493</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + qtestBasePath + &#39;/provider-specific-error&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.494">
      <div class="step-ref skipped">494</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.495">
      <div class="step-ref skipped">495</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 400</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.496">
      <div class="step-ref skipped">496</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.497">
      <div class="step-ref skipped">497</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.code == &#39;VALIDATION_ERROR&#39;  # Same normalized code</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Test another error type normalization</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.500">
      <div class="step-ref skipped">500</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/provider-specific-auth-error&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.501">
      <div class="step-ref skipped">501</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.502">
      <div class="step-ref skipped">502</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 401</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.503">
      <div class="step-ref skipped">503</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.504">
      <div class="step-ref skipped">504</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.code == &#39;UNAUTHORIZED&#39;  # Normalized code</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.506">
      <div class="step-ref skipped">506</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + qtestBasePath + &#39;/provider-specific-auth-error&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.507">
      <div class="step-ref skipped">507</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.508">
      <div class="step-ref skipped">508</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 401</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.509">
      <div class="step-ref skipped">509</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response == standardErrorSchema</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.510">
      <div class="step-ref skipped">510</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.code == &#39;UNAUTHORIZED&#39;  # Same normalized code</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[12:513]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[12:513]</span>
                <span class="scenario-name">Fallback mechanism is triggered when primary operation fails</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>3</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[12:513]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[12:513]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url apiBaseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def zephyrBasePath = &#39;/api/zephyr&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def qtestBasePath = &#39;/api/qtest&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Schema for the standard error format we expect from our error handler</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def standardErrorSchema =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.11">{
  error: &#39;#string&#39;,
  code: &#39;##string&#39;,
  service: &#39;#string&#39;,
  operation: &#39;##string&#39;,
  timestamp: &#39;##string&#39;,
  details: &#39;##object&#39;,
  requestId: &#39;##string&#39;
}</div>

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># Helper functions to simulate different error conditions</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.25">
      <div class="step-ref bg-step">25</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNetworkError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.25">function() {
  return { 
    url: &#39;https://non-existent-domain-for-testing.example&#39;,
    method: &#39;GET&#39;
  };
}</div>

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateTimeoutError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.35">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return { 
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return { 
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-timeout&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.52">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { apiToken: &#39;invalid-token&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/auth&#39;,
      method: &#39;POST&#39;,
      body: { username: &#39;invalid&#39;, password: &#39;invalid&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.71">
      <div class="step-ref bg-step">71</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateAuthorizationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.71">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/secured-resource&#39;,
      method: &#39;GET&#39;,
      headers: { &#39;Authorization&#39;: &#39;Bearer valid-but-insufficient-permissions&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.90">
      <div class="step-ref bg-step">90</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateValidationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.90">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases&#39;,
      method: &#39;POST&#39;,
      body: { /* missing required name field */ }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.109">
      <div class="step-ref bg-step">109</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateNotFoundError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.109">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/non-existent-id&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.126">
      <div class="step-ref bg-step">126</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateServerError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.126">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-server-error&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.143">
      <div class="step-ref bg-step">143</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateRateLimitError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.143">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/simulate-rate-limit&#39;,
      method: &#39;GET&#39;
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.160">
      <div class="step-ref bg-step">160</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateConflictError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.160">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/conflict&#39;,
      method: &#39;PUT&#39;,
      body: { name: &#39;Conflicting Test Case&#39;, version: &#39;outdated-version&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.179">
      <div class="step-ref bg-step">179</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateUnprocessableEntityError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.179">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/complex-validation&#39;,
      method: &#39;POST&#39;,
      body: { name: &#39;Invalid Test Case&#39;, status: &#39;INVALID_STATUS&#39; }
    };
  }
}</div>

  

     

  

</div>
</div>
          <div data-parent="[12:513]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.198">
      <div class="step-ref bg-step">198</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def simulateBatchOperationError =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.198">function(provider) {
  if (provider === &#39;zephyr&#39;) {
    return {
      url: apiBaseUrl + zephyrBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  } else {
    return {
      url: apiBaseUrl + qtestBasePath + &#39;/test-cases/batch&#39;,
      method: &#39;POST&#39;,
      body: [
        { name: &#39;Valid Test Case 1&#39; },
        { /* missing name */ },
        { name: &#39;Valid Test Case 2&#39; }
      ]
    };
  }
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.514">
      <div class="step-ref passed">514</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + zephyrBasePath + &#39;/with-fallback&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.515">
      <div class="step-ref failed">515</div>
      
      <div class="step-cell failed">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell failed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.516">
      <div class="step-ref skipped">516</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.517">
      <div class="step-ref skipped">517</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.usedFallback == true</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.518">
      <div class="step-ref skipped">518</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.message contains &#39;fallback&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.520">
      <div class="step-ref skipped">520</div>
      
      <div class="step-cell skipped">
        <span>Given</span>&nbsp;<span>url apiBaseUrl + qtestBasePath + &#39;/with-fallback&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.521">
      <div class="step-ref skipped">521</div>
      
      <div class="step-cell skipped">
        <span>When</span>&nbsp;<span>method GET</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.522">
      <div class="step-ref skipped">522</div>
      
      <div class="step-cell skipped">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.523">
      <div class="step-ref skipped">523</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.usedFallback == true</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.524">
      <div class="step-ref skipped">524</div>
      
      <div class="step-cell skipped">
        <span>And</span>&nbsp;<span>match response.message contains &#39;fallback&#39;</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
        </div>
      </div>
    </div>
  </body>
</html>

